# 6.1 CUDA的内存组织简介
略

# 6.2 CUDA中不同类型的内存

## 全局内存

### 物理位置
全局内存在GPU芯片外。容量基本上就是显存容量。

### 访问权限
可读可写。

### 可见范围
所有线程与主机端（主机端对静态全局内存变量的访问需要CUDA API）。

### 生命周期
* 由主机端决定。
* 普通的全局内存又被称为线性内存，CUDA中还有一种对用户不透明的全局内存，称为CUDA Array。
* 动态分配全局内存
  * 主机端调用cudaMalloc()，cudaMallocPitch()，cudaMalloc3D()等分配，生命周期开始。
  * 主机端调用cudaFree()释放，生命周期结束。
  * 主机端调用cudaMemcpy()，cudaMemcpy2d()，cudaMemcpy3d()进行数据传输。
* 静态全局内存变量
  * 定义在任何函数外部，用__device__修饰。
  * 核函数可以对静态全局内存变量进行访问，并且不需要通过参数的形式传递给核函数。
  * 主机函数使用cudaMemcpyFromSymbol()和cudaMemcpyToSymbol()实现静态全局内存标量与主机内存之间的数据传输。

## 常量内存

### 物理位置
在GPU芯片外，是带有常量缓存的全局内存。64KB，高速访问到的前提是一个线程束中的线程要读取相同的常量内存数据。

### 访问权限
（对核函数）仅可读，不可写。

### 可见范围
所有线程与主机端（主机端需要CUDA API）。

### 生命周期
* 由主机端决定。
* 在核函数外面用__constant__定义变量，主机函数使用cudaMemcpyToSymbol()为其赋值给核函数使用。
* （当计算能力不小于2.0时）以传值方式传递给核函数的参数亦存放在常量内存中，但给核函数传递只能在一个核函数中使用4KB常量内存。

## 纹理内存与表面内存

## 寄存器

### 物理位置
在芯片上。

### 访问权限
可读可写。

### 可见范围
仅一个线程可见。

### 生命周期
* 与所属线程生命周期一致。
* 核函数中不加任何限定符的变量一般存储在寄存器，数组有可能存放在寄存器，也可能存放在局部内存。

## 局部内存

### 物理位置
在芯片外，全局内存的一部分。


## 共享内存

### 物理位置
在芯片上。

### 访问权限
可读可写。

### 可见范围
线程块可见。

## L1与L2缓存

# 6.3 SM及其占有率